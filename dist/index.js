var To=Object.create;var H=Object.defineProperty,Ao=Object.defineProperties,Oo=Object.getOwnPropertyDescriptor,jo=Object.getOwnPropertyDescriptors,qo=Object.getOwnPropertyNames,Ye=Object.getOwnPropertySymbols,Lo=Object.getPrototypeOf,Je=Object.prototype.hasOwnProperty,Io=Object.prototype.propertyIsEnumerable;var Pe=(t,e,r)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,u=(t,e)=>{for(var r in e||(e={}))Je.call(e,r)&&Pe(t,r,e[r]);if(Ye)for(var r of Ye(e))Io.call(e,r)&&Pe(t,r,e[r]);return t},S=(t,e)=>Ao(t,jo(e)),Mo=t=>H(t,"__esModule",{value:!0});var h=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),R=(t,e)=>{for(var r in e)H(t,r,{get:e[r],enumerable:!0})},Bo=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of qo(e))!Je.call(t,o)&&o!=="default"&&H(t,o,{get:()=>e[o],enumerable:!(r=Oo(e,o))||r.enumerable});return t},re=t=>Bo(Mo(H(t!=null?To(Lo(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var d=(t,e,r)=>(Pe(t,typeof e!="symbol"?e+"":e,r),r);var le=h((Tl,st)=>{function Uo(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}st.exports=Uo});var Oe=h((Al,at)=>{var Yo=le(),lt=Object.create,Jo=function(){function t(){}return function(e){if(!Yo(e))return{};if(lt)return lt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();at.exports=Jo});var ae=h((Ol,dt)=>{function Xo(){}dt.exports=Xo});var ce=h((jl,ct)=>{var Vo=Oe(),Qo=ae();function de(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}de.prototype=Vo(Qo.prototype);de.prototype.constructor=de;ct.exports=de});var ft=h((ql,pt)=>{function Zo(t,e){for(var r=-1,o=e.length,i=t.length;++r<o;)t[i+r]=e[r];return t}pt.exports=Zo});var ut=h((Ll,ht)=>{var ei=typeof global=="object"&&global&&global.Object===Object&&global;ht.exports=ei});var pe=h((Il,mt)=>{var ti=ut(),ri=typeof self=="object"&&self&&self.Object===Object&&self,oi=ti||ri||Function("return this")();mt.exports=oi});var fe=h((Ml,gt)=>{var ii=pe(),ni=ii.Symbol;gt.exports=ni});var vt=h((Bl,wt)=>{var Ft=fe(),bt=Object.prototype,si=bt.hasOwnProperty,li=bt.toString,J=Ft?Ft.toStringTag:void 0;function ai(t){var e=si.call(t,J),r=t[J];try{t[J]=void 0;var o=!0}catch(n){}var i=li.call(t);return o&&(e?t[J]=r:delete t[J]),i}wt.exports=ai});var Dt=h((El,yt)=>{var di=Object.prototype,ci=di.toString;function pi(t){return ci.call(t)}yt.exports=pi});var je=h((Rl,St)=>{var Ct=fe(),fi=vt(),hi=Dt(),ui="[object Null]",mi="[object Undefined]",Nt=Ct?Ct.toStringTag:void 0;function gi(t){return t==null?t===void 0?mi:ui:Nt&&Nt in Object(t)?fi(t):hi(t)}St.exports=gi});var he=h((Kl,xt)=>{function Fi(t){return t!=null&&typeof t=="object"}xt.exports=Fi});var _t=h((Wl,Pt)=>{var bi=je(),wi=he(),vi="[object Arguments]";function yi(t){return wi(t)&&bi(t)==vi}Pt.exports=yi});var Ot=h((zl,At)=>{var kt=_t(),Di=he(),Tt=Object.prototype,Ci=Tt.hasOwnProperty,Ni=Tt.propertyIsEnumerable,Si=kt(function(){return arguments}())?kt:function(t){return Di(t)&&Ci.call(t,"callee")&&!Ni.call(t,"callee")};At.exports=Si});var ue=h((Gl,jt)=>{var xi=Array.isArray;jt.exports=xi});var Mt=h(($l,It)=>{var qt=fe(),Pi=Ot(),_i=ue(),Lt=qt?qt.isConcatSpreadable:void 0;function ki(t){return _i(t)||Pi(t)||!!(Lt&&t&&t[Lt])}It.exports=ki});var Rt=h((Hl,Et)=>{var Ti=ft(),Ai=Mt();function Bt(t,e,r,o,i){var n=-1,l=t.length;for(r||(r=Ai),i||(i=[]);++n<l;){var s=t[n];e>0&&r(s)?e>1?Bt(s,e-1,r,o,i):Ti(i,s):o||(i[i.length]=s)}return i}Et.exports=Bt});var Wt=h((Ul,Kt)=>{var Oi=Rt();function ji(t){var e=t==null?0:t.length;return e?Oi(t,1):[]}Kt.exports=ji});var Gt=h((Yl,zt)=>{function qi(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}zt.exports=qi});var Ut=h((Jl,Ht)=>{var Li=Gt(),$t=Math.max;function Ii(t,e,r){return e=$t(e===void 0?t.length-1:e,0),function(){for(var o=arguments,i=-1,n=$t(o.length-e,0),l=Array(n);++i<n;)l[i]=o[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=o[i];return s[e]=r(l),Li(t,this,s)}}Ht.exports=Ii});var Jt=h((Xl,Yt)=>{function Mi(t){return function(){return t}}Yt.exports=Mi});var Vt=h((Vl,Xt)=>{var Bi=je(),Ei=le(),Ri="[object AsyncFunction]",Ki="[object Function]",Wi="[object GeneratorFunction]",zi="[object Proxy]";function Gi(t){if(!Ei(t))return!1;var e=Bi(t);return e==Ki||e==Wi||e==Ri||e==zi}Xt.exports=Gi});var Zt=h((Ql,Qt)=>{var $i=pe(),Hi=$i["__core-js_shared__"];Qt.exports=Hi});var rr=h((Zl,tr)=>{var qe=Zt(),er=function(){var t=/[^.]+$/.exec(qe&&qe.keys&&qe.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Ui(t){return!!er&&er in t}tr.exports=Ui});var ir=h((ea,or)=>{var Yi=Function.prototype,Ji=Yi.toString;function Xi(t){if(t!=null){try{return Ji.call(t)}catch(e){}try{return t+""}catch(e){}}return""}or.exports=Xi});var sr=h((ta,nr)=>{var Vi=Vt(),Qi=rr(),Zi=le(),en=ir(),tn=/[\\^$.*+?()[\]{}|]/g,rn=/^\[object .+?Constructor\]$/,on=Function.prototype,nn=Object.prototype,sn=on.toString,ln=nn.hasOwnProperty,an=RegExp("^"+sn.call(ln).replace(tn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dn(t){if(!Zi(t)||Qi(t))return!1;var e=Vi(t)?an:rn;return e.test(en(t))}nr.exports=dn});var ar=h((ra,lr)=>{function cn(t,e){return t==null?void 0:t[e]}lr.exports=cn});var Le=h((oa,dr)=>{var pn=sr(),fn=ar();function hn(t,e){var r=fn(t,e);return pn(r)?r:void 0}dr.exports=hn});var pr=h((ia,cr)=>{var un=Le(),mn=function(){try{var t=un(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();cr.exports=mn});var hr=h((na,fr)=>{function gn(t){return t}fr.exports=gn});var gr=h((sa,mr)=>{var Fn=Jt(),ur=pr(),bn=hr(),wn=ur?function(t,e){return ur(t,"toString",{configurable:!0,enumerable:!1,value:Fn(e),writable:!0})}:bn;mr.exports=wn});var br=h((la,Fr)=>{var vn=800,yn=16,Dn=Date.now;function Cn(t){var e=0,r=0;return function(){var o=Dn(),i=yn-(o-r);if(r=o,i>0){if(++e>=vn)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}Fr.exports=Cn});var vr=h((aa,wr)=>{var Nn=gr(),Sn=br(),xn=Sn(Nn);wr.exports=xn});var Dr=h((da,yr)=>{var Pn=Wt(),_n=Ut(),kn=vr();function Tn(t){return kn(_n(t,void 0,Pn),t+"")}yr.exports=Tn});var Nr=h((ca,Cr)=>{var An=Le(),On=pe(),jn=An(On,"WeakMap");Cr.exports=jn});var Pr=h((pa,xr)=>{var Sr=Nr(),qn=Sr&&new Sr;xr.exports=qn});var kr=h((fa,_r)=>{function Ln(){}_r.exports=Ln});var Ie=h((ha,Ar)=>{var Tr=Pr(),In=kr(),Mn=Tr?function(t){return Tr.get(t)}:In;Ar.exports=Mn});var jr=h((ua,Or)=>{var Bn={};Or.exports=Bn});var Me=h((ma,Lr)=>{var qr=jr(),En=Object.prototype,Rn=En.hasOwnProperty;function Kn(t){for(var e=t.name+"",r=qr[e],o=Rn.call(qr,e)?r.length:0;o--;){var i=r[o],n=i.func;if(n==null||n==t)return i.name}return e}Lr.exports=Kn});var ge=h((ga,Ir)=>{var Wn=Oe(),zn=ae(),Gn=4294967295;function me(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Gn,this.__views__=[]}me.prototype=Wn(zn.prototype);me.prototype.constructor=me;Ir.exports=me});var Br=h((Fa,Mr)=>{function $n(t,e){var r=-1,o=t.length;for(e||(e=Array(o));++r<o;)e[r]=t[r];return e}Mr.exports=$n});var Rr=h((ba,Er)=>{var Hn=ge(),Un=ce(),Yn=Br();function Jn(t){if(t instanceof Hn)return t.clone();var e=new Un(t.__wrapped__,t.__chain__);return e.__actions__=Yn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}Er.exports=Jn});var zr=h((wa,Wr)=>{var Xn=ge(),Kr=ce(),Vn=ae(),Qn=ue(),Zn=he(),es=Rr(),ts=Object.prototype,rs=ts.hasOwnProperty;function Fe(t){if(Zn(t)&&!Qn(t)&&!(t instanceof Xn)){if(t instanceof Kr)return t;if(rs.call(t,"__wrapped__"))return es(t)}return new Kr(t)}Fe.prototype=Vn.prototype;Fe.prototype.constructor=Fe;Wr.exports=Fe});var $r=h((va,Gr)=>{var os=ge(),is=Ie(),ns=Me(),ss=zr();function ls(t){var e=ns(t),r=ss[e];if(typeof r!="function"||!(e in os.prototype))return!1;if(t===r)return!0;var o=is(r);return!!o&&t===o[0]}Gr.exports=ls});var Jr=h((ya,Yr)=>{var Hr=ce(),as=Dr(),ds=Ie(),Be=Me(),cs=ue(),Ur=$r(),ps="Expected a function",fs=8,hs=32,us=128,ms=256;function gs(t){return as(function(e){var r=e.length,o=r,i=Hr.prototype.thru;for(t&&e.reverse();o--;){var n=e[o];if(typeof n!="function")throw new TypeError(ps);if(i&&!l&&Be(n)=="wrapper")var l=new Hr([],!0)}for(o=l?o:r;++o<r;){n=e[o];var s=Be(n),c=s=="wrapper"?ds(n):void 0;c&&Ur(c[0])&&c[1]==(us|fs|hs|ms)&&!c[4].length&&c[9]==1?l=l[Be(c[0])].apply(l,c[3]):l=n.length==1&&Ur(n)?l[s]():l.thru(n)}return function(){var f=arguments,p=f[0];if(l&&f.length==1&&cs(p))return l.plant(p).value();for(var T=0,A=r?e[T].apply(this,f):p;++T<r;)A=e[T].call(this,A);return A}})}Yr.exports=gs});var X=h((Da,Xr)=>{var Fs=Jr(),bs=Fs();Xr.exports=bs});import a from"prop-types";import m,{Component as tl}from"react";import{DndProvider as rl}from"react-dnd";import{HTML5Backend as ol}from"react-dnd-html5-backend";var Xe={};R(Xe,{DefaultDetail:()=>oe});import $ from"prop-types";import K from"react";var _e=class extends K.Component{constructor(){super(...arguments);d(this,"handleCloseClick",e=>{e&&e.preventDefault(),this.props.close()})}render(){let e=this.props.file.key.split("/");return e=e.length?e[e.length-1]:"",K.createElement("div",null,K.createElement("h2",null,"Item Detail"),K.createElement("dl",null,K.createElement("dt",null,"Key"),K.createElement("dd",null,this.props.file.key),K.createElement("dt",null,"Name"),K.createElement("dd",null,e)),K.createElement("a",{href:"#",onClick:this.handleCloseClick},"Close"))}};d(_e,"propTypes",{file:$.shape({key:$.string.isRequired,name:$.string.isRequired,extension:$.string.isRequired,url:$.string}).isRequired,close:$.func});var oe=_e;var Ze={};R(Ze,{DefaultFilter:()=>ie});import Ve from"prop-types";import Qe from"react";var ke=class extends Qe.Component{constructor(){super(...arguments);d(this,"handleFilterChange",e=>{let r=e.target.value;this.props.updateFilter(r)})}render(){return Qe.createElement("input",{type:"search",placeholder:"Filter files",value:this.props.value,onChange:this.handleFilterChange})}};d(ke,"propTypes",{value:Ve.string.isRequired,updateFilter:Ve.func});var ie=ke;var nt={};R(nt,{TableHeader:()=>se});import W from"prop-types";import B from"react";import tt from"classnames";import{DropTarget as rt}from"react-dnd";import{NativeTypes as ot}from"react-dnd-html5-backend";import P from"prop-types";import Ro from"react";var et={};R(et,{isFolder:()=>L,moveFilesAndFolders:()=>U});function L(t){return t.key.endsWith("/")}function U(t,e,r){if(!e.didDrop())return;let o=e.getDropResult(),i=[],n=[];t.browserProps.selection.forEach(l=>{l[l.length-1]==="/"?i.push(l):n.push(l)}),t.browserProps.openFolder(o.path),i.forEach(l=>{let s=l,c=s.split("/"),f=c[c.length-2],p=`${o.path}${f}/`;p.substr(0,s.length)!==s&&p!==s&&t.browserProps.moveFolder&&t.browserProps.moveFolder(s,p)}),n.forEach(l=>{let s=l,c=s.split("/"),f=c[c.length-1],p=`${o.path}${f}`;p!==s&&t.browserProps.moveFile&&t.browserProps.moveFile(s,p)})}var Eo={Archive:["zip","rar","7z"],Audio:["mp3","ogg","wav","aac"],Excel:["xls","xlsx"],Image:["jpg","jpeg","png","bmp"],PDF:["pdf"],PowerPoint:["ppt","pptx"],Text:["txt"],Video:["mp4","flv","avi","wmv","mov"],Word:["doc","docx"],Code:["js"]},Te={};for(let[t,e]of Object.entries(Eo))for(let r of e)Te[r]=t;var Ae=class extends Ro.Component{constructor(){super(...arguments);d(this,"state",{newName:this.getName()});d(this,"handleFileClick",e=>{e&&e.preventDefault(),this.props.browserProps.preview({url:this.props.url,name:this.getName(),key:this.props.fileKey,extension:this.getExtension()})});d(this,"handleItemClick",e=>{e.stopPropagation(),this.props.browserProps.select(this.props.fileKey,"file",e.ctrlKey||e.metaKey,e.shiftKey)});d(this,"handleItemDoubleClick",e=>{e.stopPropagation(),this.handleFileClick()});d(this,"handleRenameClick",e=>{!this.props.browserProps.renameFile||this.props.browserProps.beginAction("rename",this.props.fileKey)});d(this,"handleNewNameChange",e=>{let r=e.target.value;this.setState({newName:r})});d(this,"handleRenameSubmit",e=>{if(e&&e.preventDefault(),!this.props.browserProps.renameFile)return;let r=this.state.newName.trim();if(r.length===0||["/","\\"].some(l=>r.indexOf(l)!==-1))return;let i=r,n=this.props.fileKey.lastIndexOf("/");n!==-1&&(i=`${this.props.fileKey.substr(0,n)}/${r}`),this.props.browserProps.renameFile(this.props.fileKey,i)});d(this,"handleDeleteClick",e=>{!this.props.browserProps.deleteFile||this.props.browserProps.beginAction("delete",this.props.fileKey)});d(this,"handleDeleteSubmit",e=>{e.preventDefault(),!!this.props.browserProps.deleteFile&&this.props.browserProps.deleteFile(this.props.browserProps.actionTargets)});d(this,"handleCancelEdit",e=>{this.props.browserProps.endAction()})}selectFileNameFromRef(e){if(e){let r=e.value,o=r.lastIndexOf(".");e.setSelectionRange(0,o||r.length),e.focus()}}getName(){let e=this.props.newKey||this.props.fileKey,r=e.lastIndexOf("/");return r!==-1&&(e=e.substr(r+1)),e}getExtension(){let e=this.props.fileKey.split(".");return e[e.length-1].toLowerCase().trim()}getFileType(){return Te[this.getExtension()]||"File"}connectDND(e){let r=this.props.isDragging||this.props.action;return typeof this.props.browserProps.moveFile=="function"&&!r&&!this.props.isRenaming&&(e=this.props.connectDragSource(e)),(typeof this.props.browserProps.createFiles=="function"||typeof this.props.browserProps.moveFile=="function"||typeof this.props.browserProps.moveFolder=="function")&&(e=this.props.connectDropTarget(e)),e}};d(Ae,"propTypes",{fileKey:P.string,url:P.string,newKey:P.string,isRenaming:P.bool,connectDragSource:P.func,connectDropTarget:P.func,isDragging:P.bool,action:P.string,browserProps:P.shape({icons:P.object,select:P.func,beginAction:P.func,endAction:P.func,preview:P.func,createFiles:P.func,moveFile:P.func,moveFolder:P.func,renameFile:P.func,deleteFile:P.func})});var Ko={beginDrag(t){return(!t.browserProps.selection.length||!t.browserProps.selection.includes(t.fileKey))&&t.browserProps.select(t.fileKey,"file"),{key:t.fileKey}},endDrag(t,e,r){U(t,e,r)}};function Wo(t,e){return{connectDragPreview:t.dragPreview(),connectDragSource:t.dragSource(),isDragging:e.isDragging()}}var zo={drop(t,e){if(e.didDrop())return;let r=t.newKey||t.fileKey,o=r.lastIndexOf("/"),i=o!==-1?r.substr(0,o+1):"",n=e.getItem();return n.files&&t.browserProps.createFiles&&t.browserProps.createFiles(n.files,i),{path:i}}};function Go(t,e){return{connectDropTarget:t.dropTarget(),isOver:e.isOver({shallow:!0})}}var b={dragSource:Ko,dragCollect:Wo,targetSource:zo,targetCollect:Go},Y=Ae;var ne=class extends B.Component{handleHeaderClick(e){this.props.select(this.props.fileKey)}render(){let e=B.createElement("tr",{className:tt("folder",{dragover:this.props.isOver,selected:this.props.isSelected})},B.createElement("th",null,"File"),B.createElement("th",{className:"size"},"Size"),B.createElement("th",{className:"modified"},"Last Modified"));return typeof this.props.browserProps.createFiles=="function"||typeof this.props.browserProps.moveFile=="function"||typeof this.props.browserProps.moveFolder=="function"?this.props.connectDropTarget(e):e}};d(ne,"propTypes",{select:W.func,fileKey:W.string,connectDropTarget:W.func,isOver:W.bool,isSelected:W.func,browserProps:W.shape({createFiles:W.func,moveFolder:W.func,moveFile:W.func})});var $o=rt(["file","folder",ot.FILE],b.targetSource,b.targetCollect)(ne),it=class extends ne{render(){let e=B.createElement("tr",{className:tt("folder",{dragover:this.props.isOver,selected:this.props.isSelected})},B.createElement("th",null,"Name"),B.createElement("th",{className:"size"},"Filename"),B.createElement("th",{className:"modified"},"Size"),B.createElement("th",{className:"modified"},"Location"),B.createElement("th",{className:"modified"},"Actions"));return typeof this.props.browserProps.createFiles=="function"||typeof this.props.browserProps.moveFile=="function"||typeof this.props.browserProps.moveFolder=="function"?this.props.connectDropTarget(e):e}},Ho=rt(["file","folder",ot.FILE],b.targetSource,b.targetCollect)(it),se=$o;var so={};R(so,{ListThumbnailFile:()=>be,RawListThumbnailFile:()=>Q,RawTableFile:()=>Z,SimpleListThumbnailFile:()=>eo,TableFile:()=>we});var Vr=re(X());import I from"react";import vs from"classnames";import{DragSource as ys,DropTarget as Ds}from"react-dnd";import{NativeTypes as Cs}from"react-dnd-html5-backend";import{formatDistanceToNow as Ns}from"date-fns";function ws(t,e){if(t=parseFloat(t),isNaN(t))return parseFloat("0").toFixed(e);{let r=Math.pow(10,e);return t=(Math.round(t*r)/r).toFixed(e),t.toString()}}function V(t){if(t>1024){let e=t/1024;if(e>1024){let r=e/1024;return`${ws(r,2)} MB`}return`${Math.round(e)} kB`}return`${t} B`}var Q=class extends Y{render(){let{thumbnail_url:e,action:r,url:o,isDragging:i,isRenaming:n,isSelected:l,isSelectable:s,isOver:c,isDeleting:f,showName:p,showSize:T,showModified:A,browserProps:y,connectDragPreview:O}=this.props,j;e?j=I.createElement("div",{className:"image",style:{backgroundImage:"url("+e+")"}}):j=y.icons[this.getFileType()]||y.icons.File;let w=i||r,N=y.confirmDeletionRenderer,D;p&&(!w&&f&&y.selection.length===1?D=I.createElement(N,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:o},this.getName()):!w&&n?D=I.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},I.createElement("input",{ref:this.selectFileNameFromRef,type:"text",value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0})):D=I.createElement("a",{href:o,download:"download",onClick:this.handleFileClick},this.getName()));let F;T&&!n&&!f&&(F=I.createElement("span",{className:"size"},I.createElement("small",null,V(this.props.size))));let E;A&&!n&&!f&&(E=I.createElement("span",{className:"modified"},"Last modified: ",Ns(this.props.modified,{addSuffix:!0})));let x={};s&&(x={onClick:this.handleItemClick});let z=I.createElement("li",u({className:vs("file",{pending:r,dragging:i,dragover:c,selected:l}),onDoubleClick:this.handleItemDoubleClick},x),I.createElement("div",{className:"item"},I.createElement("span",{className:"thumb"},j),I.createElement("span",{className:"name"},D),F,E));return typeof y.moveFile=="function"&&(z=O(z)),this.connectDND(z)}};d(Q,"defaultProps",{showName:!0,showSize:!0,showModified:!0,isSelectable:!0});var Ss=(0,Vr.default)(ys("file",b.dragSource,b.dragCollect),Ds(["file","folder",Cs.FILE],b.targetSource,b.targetCollect))(Q),be=Ss;import Qr from"react";var Zr=class extends Qr.Component{render(){return Qr.createElement(be,S(u({},this.props),{showName:!1,showSize:!1,showModified:!1,isSelectable:!1}))}},eo=Zr;var Ke=re(X());import v from"react";import to from"classnames";import{DragSource as ro,DropTarget as oo}from"react-dnd";import{NativeTypes as io}from"react-dnd-html5-backend";import{formatDistanceToNow as xs}from"date-fns";import _ from"react";import k from"prop-types";var Ee=t=>{let{selectedItems:e,isFolder:r,icons:o,nameFilter:i,canCreateFolder:n,onCreateFolder:l,canRenameFile:s,onRenameFile:c,canRenameFolder:f,onRenameFolder:p,canDeleteFile:T,onDeleteFile:A,canDeleteFolder:y,onDeleteFolder:O,canDownloadFile:j,onDownloadFile:w,canDownloadFolder:N,onDownloadFolder:D}=t,F=[];if(e.length){let E=e.filter(x=>x.action);if(E.length===e.length&&[...new Set(E)].length===1){let x;switch(E[0].action){case"delete":x="Deleting ...";break;case"rename":x="Renaming ...";break;default:x="Moving ...";break}F=_.createElement("div",{className:"item-actions"},o.Loading," ",x)}else{r&&n&&!i&&F.push(_.createElement("li",{key:"action-add-folder"},_.createElement("a",{onClick:l,href:"#",role:"button"},o.Folder,"\xA0Add Subfolder")));let x=e.find(z=>!z.keyDerived);!x&&!r&&s&&e.length===1?F.push(_.createElement("li",{key:"action-rename"},_.createElement("a",{onClick:c,href:"#",role:"button"},o.Rename,"\xA0Rename"))):!x&&r&&f&&F.push(_.createElement("li",{key:"action-rename"},_.createElement("a",{onClick:p,href:"#",role:"button"},o.Rename,"\xA0Rename"))),!x&&!r&&T?F.push(_.createElement("li",{key:"action-delete"},_.createElement("a",{onClick:A,href:"#",role:"button"},o.Delete,"\xA0Delete"))):!x&&r&&y&&F.push(_.createElement("li",{key:"action-delete"},_.createElement("a",{onClick:O,href:"#",role:"button"},o.Delete,"\xA0Delete"))),(!r&&j||r&&N)&&F.push(_.createElement("li",{key:"action-download"},_.createElement("a",{onClick:r?D:w,href:"#",role:"button"},o.Download,"\xA0Download"))),F.length?F=_.createElement("ul",{className:"item-actions"},F):F=_.createElement("div",{className:"item-actions"},"\xA0")}}else n&&!i&&F.push(_.createElement("li",{key:"action-add-folder"},_.createElement("a",{onClick:l,href:"#",role:"button"},o.Folder,"\xA0Add Folder"))),F.length?F=_.createElement("ul",{className:"item-actions"},F):F=_.createElement("div",{className:"item-actions"},"\xA0");return F};Ee.propTypes={selectedItems:k.arrayOf(k.object),isFolder:k.bool,icons:k.object,nameFilter:k.string,canCreateFolder:k.bool,onCreateFolder:k.func,canRenameFile:k.bool,onRenameFile:k.func,canRenameFolder:k.bool,onRenameFolder:k.func,canDeleteFile:k.bool,onDeleteFile:k.func,canDeleteFolder:k.bool,onDeleteFolder:k.func,canDownloadFile:k.bool,onDownloadFile:k.func,canDownloadFolder:k.bool,onDownloadFolder:k.func};Ee.defaultProps={selectedItems:[],isFolder:!1,icons:{},nameFilter:"",canCreateFolder:!1,onCreateFolder:null,canRenameFile:!1,onRenameFile:null,canRenameFolder:!1,onRenameFolder:null,canDeleteFile:!1,onDeleteFile:null,canDeleteFolder:!1,onDeleteFolder:null,canDownloadFile:!1,onDownloadFile:null,canDownloadFolder:!1,onDownloadFolder:null};var Re=Ee;var Z=class extends Y{render(){let{isDragging:e,isDeleting:r,isRenaming:o,isOver:i,isSelected:n,action:l,url:s,browserProps:c,connectDragPreview:f,depth:p,size:T,modified:A}=this.props,y=c.icons[this.getFileType()]||c.icons.File,O=e||l,j=c.confirmDeletionRenderer,w;!O&&r&&c.selection.length===1?w=v.createElement(j,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:s},y,this.getName()):!O&&o?w=v.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},y,v.createElement("input",{ref:this.selectFileNameFromRef,type:"text",value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0})):w=v.createElement("a",{href:s||"#",download:"download",onClick:this.handleFileClick},y,this.getName());let N=v.createElement("div",null,w);typeof c.moveFile=="function"&&(N=f(N));let D=v.createElement("tr",{className:to("file",{pending:l,dragging:e,dragover:i,selected:n}),onClick:this.handleItemClick,onDoubleClick:this.handleItemDoubleClick},v.createElement("td",{className:"name"},v.createElement("div",{style:{paddingLeft:p*16+"px"}},N)),v.createElement("td",{className:"size"},V(T)),v.createElement("td",{className:"modified"},typeof A=="undefined"?"-":xs(A,{addSuffix:!0})));return this.connectDND(D)}},Ps=(0,Ke.default)(ro("file",b.dragSource,b.dragCollect),oo(["file","folder",io.FILE],b.targetSource,b.targetCollect))(Z),no=class extends Z{render(){let{isDragging:e,isDeleting:r,isRenaming:o,isOver:i,isSelected:n,action:l,url:s,browserProps:c,connectDragPreview:f,depth:p,size:T,modified:A}=this.props,y=c.icons[this.getFileType()]||c.icons.File,O=e||l,j=c.confirmDeletionRenderer,w;!O&&r&&c.selection.length===1?w=v.createElement(j,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:s},y,this.getName()):!O&&o?w=v.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},y,v.createElement("input",{ref:this.selectFileNameFromRef,type:"text",value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0})):w=v.createElement("a",{href:s||"#",download:"download",onClick:this.handleFileClick},y,this.getName());let N=v.createElement("div",null,w);typeof c.moveFile=="function"&&(N=f(N));let D=v.createElement("tr",{className:to("file",{pending:l,dragging:e,dragover:i,selected:n}),onClick:this.handleItemClick,onDoubleClick:this.handleItemDoubleClick},v.createElement("td",null,this.props.name),v.createElement("td",{className:"name"},v.createElement("div",{style:{paddingLeft:p*16+"px"}},N)),v.createElement("td",{className:"size"},this.props.fileName),v.createElement("td",{className:"size"},V(T)),v.createElement("td",{className:"size"},this.props.fileKey),v.createElement("td",null,v.createElement("a",{onClick:F=>{F.preventDefault(),F.stopPropagation(),this.props.onDownloadFile([this.props.fileKey])},href:"#",role:"button"},c.icons.Download,"\xA0Download")));return this.connectDND(D)}},_s=(0,Ke.default)(ro("file",b.dragSource,b.dragCollect),oo(["file","folder",io.FILE],b.targetSource,b.targetCollect))(no),we=Ps;var po={};R(po,{ListThumbnailFolder:()=>ao,RawListThumbnailFolder:()=>ve,RawTableFolder:()=>ye,TableFolder:()=>De});var lo=re(X());import q from"react";import Os from"classnames";import{DragSource as js,DropTarget as qs}from"react-dnd";import{NativeTypes as Ls}from"react-dnd-html5-backend";import C from"prop-types";import ks from"react";var We=class extends ks.Component{constructor(){super(...arguments);d(this,"state",{newName:this.props.isDraft?"New folder":this.getName()});d(this,"handleFolderClick",e=>{e.stopPropagation(),this.props.browserProps.select(this.props.fileKey,"folder",e.ctrlKey||e.metaKey,e.shiftKey)});d(this,"handleFolderDoubleClick",e=>{e.stopPropagation(),this.toggleFolder()});d(this,"handleRenameClick",e=>{!this.props.browserProps.renameFolder||this.props.browserProps.beginAction("rename",this.props.fileKey)});d(this,"handleNewNameChange",e=>{let r=e.target.value;this.setState({newName:r})});d(this,"handleRenameSubmit",e=>{if(e.preventDefault(),!this.props.browserProps.renameFolder&&!this.props.isDraft)return;let r=this.state.newName.trim();if(r.length===0||["/","\\"].some(n=>r.indexOf(n)!==-1))return;let i=this.props.fileKey.substr(0,this.props.fileKey.substr(0,this.props.fileKey.length-1).lastIndexOf("/"));i.length&&(i+="/"),i+=r,i+="/",this.props.isDraft?this.props.browserProps.createFolder(i):this.props.browserProps.renameFolder(this.props.fileKey,i)});d(this,"handleDeleteClick",e=>{!this.props.browserProps.deleteFolder||this.props.browserProps.beginAction("delete",this.props.fileKey)});d(this,"handleDeleteSubmit",e=>{e.preventDefault(),!!this.props.browserProps.deleteFolder&&this.props.browserProps.deleteFolder(this.props.browserProps.actionTargets)});d(this,"handleCancelEdit",e=>{this.props.browserProps.endAction()});d(this,"toggleFolder",()=>{this.props.browserProps.toggleFolder(this.props.fileKey)})}selectFolderNameFromRef(e){if(e){let r=e.value;e.setSelectionRange(0,r.length),e.focus()}}getName(){if(this.props.name)return this.props.name;let e=this.props.fileKey.split("/");return this.props.newName||e[e.length-2]}connectDND(e){let r=this.props.isDragging||this.props.action;return this.props.keyDerived&&(typeof this.props.browserProps.moveFolder=="function"&&!r&&!this.props.isRenaming&&!this.props.isDeleting&&(e=this.props.connectDragSource(e)),(typeof this.props.browserProps.createFiles=="function"||typeof this.props.browserProps.moveFolder=="function"||typeof this.props.browserProps.moveFile=="function")&&(e=this.props.connectDropTarget(e))),e}};d(We,"propTypes",{name:C.string,fileKey:C.string,newName:C.string,keyDerived:C.bool,isDraft:C.bool,isRenaming:C.bool,isDeleting:C.bool,connectDragSource:C.func,connectDropTarget:C.func,isDragging:C.bool,action:C.string,browserProps:C.shape({select:C.func,toggleFolder:C.func,beginAction:C.func,endAction:C.func,preview:C.func,createFiles:C.func,createFolder:C.func,moveFile:C.func,moveFolder:C.func,renameFolder:C.func,deleteFolder:C.func})});var Ts={beginDrag(t){return t.browserProps.selection.length||t.browserProps.select(t.fileKey,"folder"),{key:t.fileKey}},endDrag(t,e,r){U(t,e,r)}};function As(t,e){return{connectDragPreview:t.dragPreview(),connectDragSource:t.dragSource(),isDragging:e.isDragging()}}var G={dragSource:Ts,dragCollect:As},ee=We;var ve=class extends ee{render(){let{isOpen:e,isDragging:r,isDeleting:o,isRenaming:i,isDraft:n,isOver:l,isSelected:s,url:c,action:f,browserProps:p,depth:T,keyDerived:A,connectDragPreview:y}=this.props,O=p.icons[e?"FolderOpen":"Folder"],j=r||f,w=p.confirmDeletionRenderer,N;!j&&o&&p.selection.length===1?N=q.createElement(w,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:c},this.getName()):!j&&i||n?N=q.createElement("div",null,q.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},q.createElement("input",{type:"text",ref:this.selectFolderNameFromRef,value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0}))):N=q.createElement("div",null,q.createElement("a",{onClick:this.toggleFolder},this.getName()));let D;if(e&&p.nestChildren){D=[];for(let E=0;E<D.length;E++){let x=D[E],z=S(u({},p.getItemProps(x,p)),{depth:T+1});L(x)?D.push(q.createElement(p.folderRenderer,u(S(u(u({},x),z),{browserProps:p}),p.folderRendererProps))):D.push(q.createElement(p.fileRenderer,u(S(u(u({},x),z),{browserProps:p}),p.fileRendererProps)))}D.length?D=q.createElement("ul",{style:{padding:"0 8px",paddingLeft:"16px"}},D):D=q.createElement("p",null,"No items in this folder")}let F=q.createElement("li",{className:Os("folder",{expanded:e&&p.nestChildren,pending:f,dragging:r,dragover:l,selected:s}),onClick:this.handleFolderClick,onDoubleClick:this.handleFolderDoubleClick},q.createElement("div",{className:"item"},q.createElement("span",{className:"thumb"},O),q.createElement("span",{className:"name"},N)),D);return typeof p.moveFolder=="function"&&A&&(F=y(F)),this.connectDND(F)}},Is=(0,lo.default)(js("folder",G.dragSource,G.dragCollect),qs(["file","folder",Ls.FILE],b.targetSource,b.targetCollect))(ve),ao=Is;var co=re(X());import M from"react";import Ms from"classnames";import{DragSource as Bs,DropTarget as Es}from"react-dnd";import{NativeTypes as Rs}from"react-dnd-html5-backend";var ye=class extends ee{render(){let{isOpen:e,isDragging:r,isDeleting:o,isRenaming:i,isDraft:n,isOver:l,isSelected:s,action:c,url:f,browserProps:p,connectDragPreview:T,depth:A}=this.props,y=p.icons[e?"FolderOpen":"Folder"],O=r||c,j=p.confirmDeletionRenderer,w;!O&&o&&p.selection.length===1?w=M.createElement(j,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:f},y,this.getName()):!O&&i||n?w=M.createElement("div",null,M.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},y,M.createElement("input",{type:"text",ref:this.selectFolderNameFromRef,value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0}))):w=M.createElement("div",null,M.createElement("a",{onClick:this.toggleFolder},y,this.getName()));let N=M.createElement("div",null,w);typeof p.moveFile=="function"&&(N=T(N));let D=M.createElement("tr",{className:Ms("folder",{pending:c,dragging:r,dragover:l,selected:s}),onClick:this.handleFolderClick,onDoubleClick:this.handleFolderDoubleClick},M.createElement("td",{className:"name"},M.createElement("div",{style:{paddingLeft:A*16+"px"}},N)),M.createElement("td",null),M.createElement("td",null));return this.connectDND(D)}},Ks=(0,co.default)(Bs("folder",G.dragSource,G.dragCollect),Es(["file","folder",Rs.FILE],b.targetSource,b.targetCollect))(ye),De=Ks;import Ce from"react";import Ne from"prop-types";var ze=t=>{let{children:e,handleDeleteSubmit:r,handleFileClick:o,url:i}=t;return Ce.createElement("form",{className:"deleting",onSubmit:r},Ce.createElement("a",{href:i,download:"download",onClick:o},e),Ce.createElement("div",null,Ce.createElement("button",{type:"submit"},"Confirm Deletion")))};ze.propTypes={children:Ne.node,handleDeleteSubmit:Ne.func,handleFileClick:Ne.func,url:Ne.string};ze.defaultProps={url:"#"};var Ge=ze;import Ws from"react";import zs from"prop-types";var fo=t=>{let{handleDeleteSubmit:e}=t;return Ws.createElement("button",{className:"deleting",onClick:e},"Confirm Deletion")};fo.propTypes={handleDeleteSubmit:zs.func};var $e=fo;var wo={};R(wo,{GroupByFolder:()=>Se,GroupByModifiedRelative:()=>bo});function Se(t,e){let r={contents:[],children:{}};t.map(i=>{i.relativeKey=(i.newKey||i.key).substr(e.length);let n=r,l=i.relativeKey.split("/");l.map((s,c)=>{if(c===l.length-1&&L(i))for(let p in i)n[p]=i[p];if(s==="")return;!L(i)&&c===l.length-1?n.contents.push(S(u({},i),{keyDerived:!0})):(s in n.children||(n.children[s]={contents:[],children:{}}),n=n.children[s])})});function o(i,n){n!==""&&(n+="/");let l=[];for(let s in i.children)l.push(S(u({},i.children[s]),{contents:void 0,keyDerived:!0,key:e+n+s+"/",relativeKey:n+s+"/",children:o(i.children[s],n+s),size:0}));return l=l.concat(i.contents),l}return t=o(r,""),t}import{format as Xs,startOfMonth as Vs,endOfMonth as Qs}from"date-fns";import{startOfToday as Gs,endOfToday as $s,startOfYesterday as Hs,endOfYesterday as Us,startOfWeek as ho,endOfWeek as uo,addWeeks as mo,startOfMonth as Ys,endOfMonth as Js,getMonth as go}from"date-fns";function Fo(){let t=[],e=new Date;return t.push({name:"Today",begins:Gs(),ends:$s(),items:[]}),t.push({name:"Yesterday",begins:Hs(),ends:Us(),items:[]}),t.push({name:"Earlier this Week",begins:ho(e),ends:uo(e),items:[]}),t.push({name:"Last Week",begins:ho(mo(e,-1)),ends:uo(mo(e,-1)),items:[]}),go(t[t.length-1].begins)===go(e)&&t.push({name:"Earlier this Month",begins:Ys(e),ends:Js(e),items:[]}),t}function bo(t,e){let r=Fo();for(let i=0;i<t.length;i++){let n=t[i];if(L(n))continue;let l=S(u({},n),{keyDerived:!0}),s=!1,c=+l.modified;for(let f=0;f<r.length;f++){let p=r[f];if(c>+p.begins&&c<=+p.ends){p.items.push(l),s=!0;break}}if(!s){let f={name:Xs(l.modified,"MMMM yyyy"),begins:Vs(l.modified),ends:Qs(l.modified),items:[]};f.items.push(l),r.push(f)}}let o=[];for(let i=0;i<r.length;i++){let n=r[i];!n.items.length||o.push({key:`${n.name.toLowerCase().replace(" ","_")}/`,name:n.name,children:n.items,size:0})}return o}var No={};R(No,{SortByModified:()=>Co,SortByName:()=>xe});var vo=/(-?\d*\.?\d+)/g;function He(t,e){let r=String(t.name).split(vo),o=String(e.name).split(vo),i=Math.min(r.length,o.length);for(let n=0;n<i;n++){let l=parseFloat(r[n])||r[n].toLowerCase(),s=parseFloat(o[n])||o[n].toLowerCase();if(l<s)return-1;if(l>s)return 1}return 0}function Zs(t,e){return t.draft&&!e.draft?1:e.draft&&!t.draft?-1:He(t,e)}function yo(t){let e=[],r=[];for(let i=0;i<t.length;i++){let n=t[i],l=(n.newKey||n.key).split("/");n.children?(n.name||(n.name=l[l.length-2]),e.push(n)):(n.name||(n.name=l[l.length-1]),r.push(n))}r=r.sort(He),e=e.sort(Zs);for(let i=0;i<e.length;i++){let n=e[i];n.children=yo(n.children)}let o=[];return o=o.concat(e),o=o.concat(r),o}function xe(t){return yo(t)}import{compareAsc as el}from"date-fns";function Do(t){let e=[],r=[];for(let i=0;i<t.length;i++){let n=t[i],l=(n.newKey||n.key).split("/");n.children?e.push(n):(n.name=l[l.length-1],r.push(n))}r=r.sort(el);for(let i=0;i<e.length;i++){let n=e[i];n.children=Do(n.children)}let o=[];return o=o.concat(e),o=o.concat(r),o}function Co(t){return Do(t)}var Ue=20,il=/.*\/__new__[/]?$/gm;function nl(t,e){return{key:`file-${t.key}`,fileKey:t.key,isSelected:e.selection.includes(t.key),isOpen:t.key in e.openFolders||e.nameFilter,isRenaming:e.activeAction==="rename"&&e.actionTargets.includes(t.key),isDeleting:e.activeAction==="delete"&&e.actionTargets.includes(t.key),isDraft:!!t.draft}}var te=class extends m.Component{constructor(){super(...arguments);d(this,"state",{openFolders:{},selection:[],activeAction:null,actionTargets:[],nameFilter:"",searchResultsShown:Ue,previewFile:null,addFolder:null});d(this,"getFile",e=>{let r=!1,o=this.props.files.find(i=>(i.key.startsWith(e)&&(r=!0),i.key===e));if(o)return o;if(r)return{key:e,modified:0,size:0,relativeKey:e}});d(this,"createFiles",(e,r)=>{this.setState(o=>{let i={selection:[]};return r&&(i.openFolders=S(u({},o.openFolders),{[r]:!0})),i},()=>{this.props.onCreateFiles(e,r)})});d(this,"createFolder",e=>{this.setState({activeAction:null,actionTargets:[],selection:[e]},()=>{this.props.onCreateFolder(e)})});d(this,"moveFile",(e,r)=>{this.setState({activeAction:null,actionTargets:[],selection:[r]},()=>{this.props.onMoveFile(e,r)})});d(this,"moveFolder",(e,r)=>{this.setState(o=>{let i={activeAction:null,actionTargets:[],selection:[r]};return e in o.openFolders&&(i.openFolders=S(u({},o.openFolders),{[r]:!0})),i},()=>{this.props.onMoveFolder(e,r)})});d(this,"renameFile",(e,r)=>{this.setState({activeAction:null,actionTargets:[],selection:[r]},()=>{this.props.onRenameFile(e,r)})});d(this,"renameFolder",(e,r)=>{this.setState(o=>{let i={activeAction:null,actionTargets:[]};return o.selection[0].substr(0,e.length)===e&&(i.selection=[o.selection[0].replace(e,r)]),e in o.openFolders&&(i.openFolders=S(u({},o.openFolders),{[r]:!0})),i},()=>{this.props.onRenameFolder(e,r)})});d(this,"deleteFile",e=>{this.setState({activeAction:null,actionTargets:[],selection:[]},()=>{this.props.onDeleteFile(e)})});d(this,"deleteFolder",e=>{this.setState(r=>{let o={activeAction:null,actionTargets:[],selection:[]};return e in r.openFolders&&(o.openFolders=u({},r.openFolders),delete o.openFolders[e]),o},()=>{this.props.onDeleteFolder(e)})});d(this,"downloadFile",e=>{this.setState({activeAction:null,actionTargets:[]},()=>{this.props.onDownloadFile(e)})});d(this,"downloadFolder",e=>{this.setState({activeAction:null,actionTargets:[]},()=>{this.props.onDownloadFolder(e)})});d(this,"beginAction",(e,r)=>{this.setState({activeAction:e,actionTargets:r||[]})});d(this,"endAction",()=>{this.state.selection&&this.state.selection.length>0&&this.state.selection.filter(e=>e.match(il)).length>0&&this.setState({selection:[]}),this.beginAction(null,null)});d(this,"select",(e,r,o,i)=>{let{actionTargets:n}=this.state,l=n.length&&!n.includes(e),s=this.getFile(e),c=[e];if(o||i){let f=this.state.selection.indexOf(e);f!==-1?c=[...this.state.selection.slice(0,f),...this.state.selection.slice(f+1)]:c=[...this.state.selection,e]}this.setState(f=>({selection:c,actionTargets:l?[]:n,activeAction:l?null:f.activeAction}),()=>{this.props.onSelect(s),r==="file"&&this.props.onSelectFile(s),r==="folder"&&this.props.onSelectFolder(s)})});d(this,"preview",e=>{this.state.previewFile&&this.state.previewFile.key!==e.key&&this.closeDetail(),this.setState({previewFile:e},()=>{this.props.onPreviewOpen(e)})});d(this,"closeDetail",()=>{this.setState({previewFile:null},()=>{this.props.onPreviewClose(this.state.previewFile)})});d(this,"handleShowMoreClick",e=>{e.preventDefault(),this.setState(r=>({searchResultsShown:r.searchResultsShown+Ue}))});d(this,"toggleFolder",e=>{let r=e in this.state.openFolders;this.setState(o=>{let i={openFolders:u({},o.openFolders)};return r?delete i.openFolders[e]:i.openFolders[e]=!0,i},()=>{let o=r?"onFolderClose":"onFolderOpen";this.props[o](this.getFile(e))})});d(this,"openFolder",e=>{this.setState(r=>({openFolders:S(u({},r.openFolders),{[e]:!0})}),()=>{this.props.onFolderOpen(this.getFile(e))})});d(this,"handleGlobalClick",e=>{!!(this.browserRef&&this.browserRef.contains(e.target))||this.setState({selection:[],actionTargets:[],activeAction:null})});d(this,"handleActionBarRenameClick",e=>{e.preventDefault(),this.beginAction("rename",this.state.selection)});d(this,"handleActionBarDeleteClick",e=>{e.preventDefault(),this.beginAction("delete",this.state.selection)});d(this,"handleActionBarAddFolderClick",e=>{e.preventDefault(),this.state.activeAction!=="createFolder"&&this.setState(r=>{let o="";r.selection&&r.selection.length>0&&(o+=r.selection,o.substr(o.length-1,o.length)!=="/"&&(o+="/")),o!=="__new__/"&&!o.endsWith("/__new__/")&&(o+="__new__/");let i={actionTargets:[o],activeAction:"createFolder",selection:[o]};return r.selection&&r.selection.length>0&&(i.openFolders=S(u({},r.openFolders),{[this.state.selection]:!0})),i})});d(this,"handleActionBarDownloadClick",e=>{e.preventDefault();let r=this.getFiles(),o=this.getSelectedItems(r);if(o.length===1&&L(o[0])){this.downloadFolder(this.state.selection);return}this.downloadFile(this.state.selection)});d(this,"updateFilter",e=>{this.setState({nameFilter:e,searchResultsShown:Ue})});d(this,"handleMultipleDeleteSubmit",()=>{console.log(this),this.deleteFolder(this.state.selection.filter(e=>e[e.length-1]==="/")),this.deleteFile(this.state.selection.filter(e=>e[e.length-1]!=="/"))})}componentDidMount(){this.props.renderStyle==="table"&&this.props.nestChildren&&console.warn("Invalid settings: Cannot nest table children in file browser"),window.addEventListener("click",this.handleGlobalClick)}componentWillUnmount(){window.removeEventListener("click",this.handleGlobalClick)}getBrowserProps(){return{nestChildren:this.props.nestChildren,fileRenderer:this.props.fileRenderer,fileRendererProps:this.props.fileRendererProps,folderRenderer:this.props.folderRenderer,folderRendererProps:this.props.folderRendererProps,confirmDeletionRenderer:this.props.confirmDeletionRenderer,confirmMultipleDeletionRenderer:this.props.confirmMultipleDeletionRenderer,icons:this.props.icons,openFolders:this.state.openFolders,nameFilter:this.state.nameFilter,selection:this.state.selection,activeAction:this.state.activeAction,actionTargets:this.state.actionTargets,select:this.select,openFolder:this.openFolder,toggleFolder:this.toggleFolder,beginAction:this.beginAction,endAction:this.endAction,preview:this.preview,createFiles:this.props.onCreateFiles?this.createFiles:void 0,createFolder:this.props.onCreateFolder?this.createFolder:void 0,renameFile:this.props.onRenameFile?this.renameFile:void 0,renameFolder:this.props.onRenameFolder?this.renameFolder:void 0,moveFile:this.props.onMoveFile?this.moveFile:void 0,moveFolder:this.props.onMoveFolder?this.moveFolder:void 0,deleteFile:this.props.onDeleteFile?this.deleteFile:void 0,deleteFolder:this.props.onDeleteFolder?this.deleteFolder:void 0,getItemProps:nl}}renderActionBar(e){let{icons:r,canFilter:o,filterRendererProps:i,filterRenderer:n,actionRenderer:l,onCreateFolder:s,onRenameFile:c,onRenameFolder:f,onDeleteFile:p,onDeleteFolder:T,onDownloadFile:A,onDownloadFolder:y}=this.props,O=this.getBrowserProps(),j=e.length===1&&L(e[0]),w;o&&(w=m.createElement(n,u({value:this.state.nameFilter,updateFilter:this.updateFilter},i)));let N=m.createElement(l,{browserProps:O,selectedItems:e,isFolder:j,icons:r,nameFilter:this.state.nameFilter,canCreateFolder:typeof s=="function",onCreateFolder:this.handleActionBarAddFolderClick,canRenameFile:typeof c=="function",onRenameFile:this.handleActionBarRenameClick,canRenameFolder:typeof f=="function",onRenameFolder:this.handleActionBarRenameClick,canDeleteFile:typeof p=="function",onDeleteFile:this.handleActionBarDeleteClick,canDeleteFolder:typeof T=="function",onDeleteFolder:this.handleActionBarDeleteClick,canDownloadFile:typeof A=="function",onDownloadFile:this.handleActionBarDownloadClick,canDownloadFolder:typeof y=="function",onDownloadFolder:this.handleActionBarDownloadClick});return m.createElement("div",{className:"action-bar"},w,N)}renderFiles(e,r){let{fileRenderer:o,fileRendererProps:i,folderRenderer:n,folderRendererProps:l}=this.props,s=this.getBrowserProps(),c=[];return e.map(f=>{let p=S(u({},s.getItemProps(f,s)),{depth:this.state.nameFilter?0:r});L(f)?((this.props.showFoldersOnFilter||!this.state.nameFilter)&&c.push(m.createElement(n,u(S(u(u({},f),p),{browserProps:s}),l))),(this.state.nameFilter||p.isOpen&&!s.nestChildren)&&(c=c.concat(this.renderFiles(f.children,r+1)))):c.push(m.createElement(o,S(u(S(u(u({},f),p),{browserProps:s}),i),{onDownloadFile:this.props.onDownloadFile})))}),c}getFiles(){let e=this.props.files.concat([]);if(this.state.activeAction==="createFolder"&&e.push({key:this.state.actionTargets[0],size:0,draft:!0}),this.state.nameFilter){let r=[],o=this.state.nameFilter.toLowerCase().split(" ");e.map(i=>{let n=!1;o.map(l=>{i.key.toLowerCase().trim().indexOf(l)===-1&&(n=!0)}),!n&&r.push(i)}),e=r}if(typeof this.props.group=="function")e=this.props.group(e,"");else{let r=[];e.map(o=>{L(o)||r.push(o)}),e=r}return typeof this.props.sort=="function"&&(e=this.props.sort(e)),e}getSelectedItems(e){let{selection:r}=this.state,o=[],i=n=>{r.includes(n.key)&&o.push(n),n.children&&n.children.map(i)};return e.map(i),o}render(){let r={browserProps:this.getBrowserProps(),fileKey:"",fileCount:this.props.files.length},o,i=this.getFiles(),n=this.getSelectedItems(i),l,s=this.renderFiles(i,0);switch(this.props.renderStyle){case"table":if(!s.length)this.state.nameFilter?s=m.createElement("tr",null,m.createElement("td",{colSpan:100},'No files matching "',this.state.nameFilter,'".')):s=m.createElement("tr",null,m.createElement("td",{colSpan:100},this.props.noFilesMessage));else if(this.state.nameFilter){let f=s.length;s=s.slice(0,this.state.searchResultsShown),f>s.length&&s.push(m.createElement("tr",{key:"show-more"},m.createElement("td",{colSpan:100},m.createElement("a",{onClick:this.handleShowMoreClick,href:"#"},"Show more results"))))}this.props.headerRenderer&&(l=m.createElement("thead",null,m.createElement(this.props.headerRenderer,u(u({},r),this.props.headerRendererProps)))),o=m.createElement("table",{cellSpacing:"0",cellPadding:"0"},l,m.createElement("tbody",null,s));break;case"list":if(!s.length)this.state.nameFilter?s=m.createElement("p",{className:"empty"},'No files matching "',this.state.nameFilter,'"'):s=m.createElement("p",{className:"empty"},"No files.");else{let f;if(this.state.nameFilter){let p=s.length;s=s.slice(0,this.state.searchResultsShown),p>s.length&&(f=m.createElement("a",{onClick:this.handleShowMoreClick,href:"#"},"Show more results"))}s=m.createElement("div",null,m.createElement("ul",null,s),f)}this.props.headerRenderer&&(l=m.createElement(this.props.headerRenderer,u(u({},r),this.props.headerRendererProps))),o=m.createElement("div",null,l,s);break}let c=this.props.confirmMultipleDeletionRenderer;return m.createElement("div",{className:"rendered-react-keyed-file-browser"},this.props.actions,m.createElement("div",{className:"rendered-file-browser",ref:f=>{this.browserRef=f}},this.props.showActionBar&&this.renderActionBar(n),this.state.activeAction==="delete"&&this.state.selection.length>1&&m.createElement(c,{handleDeleteSubmit:this.handleMultipleDeleteSubmit}),m.createElement("div",{className:"files"},o)),this.state.previewFile!==null&&m.createElement(this.props.detailRenderer,u({file:this.state.previewFile,close:this.closeDetail},this.props.detailRendererProps)))}};d(te,"propTypes",{files:a.arrayOf(a.shape({key:a.string.isRequired,modified:a.number,size:a.number})).isRequired,actions:a.node,showActionBar:a.bool.isRequired,canFilter:a.bool.isRequired,showFoldersOnFilter:a.bool,noFilesMessage:a.string,group:a.func.isRequired,sort:a.func.isRequired,icons:a.shape({Folder:a.element,FolderOpen:a.element,File:a.element,PDF:a.element,Image:a.element,Delete:a.element,Rename:a.element,Loading:a.element,Download:a.element}),nestChildren:a.bool.isRequired,renderStyle:a.oneOf(["list","table"]).isRequired,startOpen:a.bool.isRequired,headerRenderer:a.func,headerRendererProps:a.object,filterRenderer:a.func,filterRendererProps:a.object,fileRenderer:a.func,fileRendererProps:a.object,folderRenderer:a.func,folderRendererProps:a.object,detailRenderer:a.func,detailRendererProps:a.object,actionRenderer:a.func,confirmDeletionRenderer:a.func,confirmMultipleDeletionRenderer:a.func,onCreateFiles:a.oneOfType([a.func,a.bool]),onCreateFolder:a.oneOfType([a.func,a.bool]),onMoveFile:a.oneOfType([a.func,a.bool]),onMoveFolder:a.oneOfType([a.func,a.bool]),onRenameFile:a.oneOfType([a.func,a.bool]),onRenameFolder:a.oneOfType([a.func,a.bool]),onDeleteFile:a.oneOfType([a.func,a.bool]),onDeleteFolder:a.oneOfType([a.func,a.bool]),onDownloadFile:a.oneOfType([a.func,a.bool]),onDownloadFolder:a.oneOfType([a.func,a.bool]),onSelect:a.func,onSelectFile:a.func,onSelectFolder:a.func,onPreviewOpen:a.func,onPreviewClose:a.func,onFolderOpen:a.func,onFolderClose:a.func}),d(te,"defaultProps",{showActionBar:!0,canFilter:!0,showFoldersOnFilter:!1,noFilesMessage:"No files.",group:Se,sort:xe,nestChildren:!1,renderStyle:"table",startOpen:!1,headerRenderer:se,headerRendererProps:{},filterRenderer:ie,filterRendererProps:{},fileRenderer:we,fileRendererProps:{},folderRenderer:De,folderRendererProps:{},detailRenderer:oe,detailRendererProps:{},actionRenderer:Re,confirmDeletionRenderer:Ge,confirmMultipleDeletionRenderer:$e,icons:{},onSelect:e=>{},onSelectFile:e=>{},onSelectFolder:e=>{},onPreviewOpen:e=>{},onPreviewClose:e=>{},onFolderOpen:e=>{},onFolderClose:e=>{}});var So=class extends tl{render(){return m.createElement(rl,{backend:ol},m.createElement(te,u({},this.props)),m.createElement("h1",null,"Local version"))}},xo=So;var ko={};R(ko,{FontAwesome:()=>_o});import g from"react";var Po=t=>{let e=t===4?"fa":"fas",r=t===4?["FontAwesome",'"FontAwesome"']:['"Font Awesome 5 Free"','"Font Awesome 5 Pro"'],o=!1,i=document.createElement("span");i.className=e,i.style.display="none",document.body.insertBefore(i,document.body.firstChild);let n=(l,s)=>window.getComputedStyle(l,null).getPropertyValue(s);return r.includes(n(i,"font-family"))?o=!0:console.warn(`Font Awesome ${t} was not detected but Font Awesome ${t} icons have been requested for \`react-object-list\``),document.body.removeChild(i),o},sl=(t=4)=>{switch(t){case 4:return Po(4),{File:g.createElement("i",{className:"fa fa-file-o","aria-hidden":"true"}),Image:g.createElement("i",{className:"fa fa-file-image-o","aria-hidden":"true"}),Video:g.createElement("i",{className:"fa fa-file-video-o","aria-hidden":"true"}),Audio:g.createElement("i",{className:"fa fa-file-audio-o","aria-hidden":"true"}),Archive:g.createElement("i",{className:"fa fa-file-archive-o","aria-hidden":"true"}),Word:g.createElement("i",{className:"fa fa-file-word-o","aria-hidden":"true"}),Excel:g.createElement("i",{className:"fa fa-file-excel-o","aria-hidden":"true"}),PowerPoint:g.createElement("i",{className:"fa fa-file-powerpoint-o","aria-hidden":"true"}),Text:g.createElement("i",{className:"fa fa-file-text-o","aria-hidden":"true"}),PDF:g.createElement("i",{className:"fa fa-file-pdf-o","aria-hidden":"true"}),Rename:g.createElement("i",{className:"fa fa-i-cursor","aria-hidden":"true"}),Folder:g.createElement("i",{className:"fa fa-folder-o","aria-hidden":"true"}),FolderOpen:g.createElement("i",{className:"fa fa-folder-open-o","aria-hidden":"true"}),Delete:g.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"}),Loading:g.createElement("i",{className:"fa fa-circle-o-notch fa-spin","aria-hidden":"true"}),Download:g.createElement("i",{className:"fa fa-download","aria-hidden":"true"})};case 5:return Po(5),{File:g.createElement("i",{className:"far fa-file","aria-hidden":"true"}),Image:g.createElement("i",{className:"far fa-file-image","aria-hidden":"true"}),Video:g.createElement("i",{className:"far fa-file-video","aria-hidden":"true"}),Audio:g.createElement("i",{className:"far fa-file-audio","aria-hidden":"true"}),Archive:g.createElement("i",{className:"far fa-file-archive","aria-hidden":"true"}),Word:g.createElement("i",{className:"far fa-file-word","aria-hidden":"true"}),Excel:g.createElement("i",{className:"far fa-file-excel","aria-hidden":"true"}),PowerPoint:g.createElement("i",{className:"far fa-file-powerpoint","aria-hidden":"true"}),Text:g.createElement("i",{className:"far fa-file-alt","aria-hidden":"true"}),PDF:g.createElement("i",{className:"far fa-file-pdf","aria-hidden":"true"}),Rename:g.createElement("i",{className:"fas fa-i-cursor","aria-hidden":"true"}),Folder:g.createElement("i",{className:"far fa-folder","aria-hidden":"true"}),FolderOpen:g.createElement("i",{className:"far fa-folder-open","aria-hidden":"true"}),Delete:g.createElement("i",{className:"far fa-trash-alt","aria-hidden":"true"}),Loading:g.createElement("i",{className:"fas fa-circle-notch fa-spin","aria-hidden":"true"}),Download:g.createElement("i",{className:"fas fa-download","aria-hidden":"true"})};default:console.warn(`Could not find config for version ${t}`,"Accepted versions are: 4, 5","Please make an issue in `react-object-list` to fix this.")}},_o=sl;var mc=xo;export{Y as BaseFile,b as BaseFileConnectors,ee as BaseFolder,G as BaseFolderConnectors,Xe as Details,_s as ExtendedTableFile,Ho as ExtendedTableHeader,so as FileRenderers,Ze as Filters,po as FolderRenderers,wo as Groupers,nt as Headers,ko as Icons,te as RawFileBrowser,No as Sorters,et as Utils,mc as default};
//# sourceMappingURL=index.js.map
